import{A as F,B as S,E as I,F as k,G as _,H as N,I as u,L as Y,M as z,O as K,P as l,Q as C,R as b,S as Q,X as ee,Y as te,Z as h,a as U,aa as q,b as H,ba as ne,c as J,ca as ie,d as g,da as re,e as V,f as M,fa as oe,g as E,ga as se,ha as ae,k as s,ka as le,l as L,la as de,m as c,n as $,p as W,q as Z,r as m,s as v,t as X,u as x,v as w,w as y,x as o,y as r,z as d}from"./chunk-Y3EZBSQ2.js";var f=class n{processor=new oe.A2uiMessageProcessor;history=E([]);currentIndex=E(-1);messages=h(()=>{let t=this.currentIndex(),e=this.history();return t<0?[]:e.slice(0,t+1)});surfaces=h(()=>this.processor.getSurfaces());constructor(){}processMessage(t){let e={timestamp:new Date,message:t},i=this.currentIndex(),a=this.history(),p=a;i<a.length-1&&(p=a.slice(0,i+1)),p=[...p,e],this.history.set(p),this.currentIndex.set(p.length-1),this.processor.processMessages([t]),this.triggerUpdate.update(P=>P+1)}jumpTo(t){let e=this.history();if(!(t<-1||t>=e.length)){this.processor.clearSurfaces();for(let i=0;i<=t;i++)this.processor.processMessages([e[i].message]);this.currentIndex.set(t),this.triggerUpdate.update(i=>i+1)}}triggerUpdate=E(0);surfacesMap=h(()=>(this.triggerUpdate(),new Map(this.processor.getSurfaces())));reset(){this.processor.clearSurfaces(),this.history.set([]),this.currentIndex.set(-1),this.triggerUpdate.update(t=>t+1)}loadHistory(t){this.reset();for(let e of t)this.processMessage(e)}getProcessor(){return this.processor}static \u0275fac=function(e){return new(e||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};function pe(n,t){if(n&1&&(o(0,"span"),l(1),r()),n&2){let e=u();K(e.getType(e.data)),s(),C(e.formatValue(e.data))}}function fe(n,t){if(n&1&&(o(0,"span",5),l(1),r()),n&2){let e=u(2);s(),b("",e.key,": ")}}function ge(n,t){if(n&1&&(o(0,"span",5),l(1),r()),n&2){let e=u().$implicit;s(),b("",e.key,": ")}}function me(n,t){if(n&1&&(o(0,"div",8),m(1,ge,2,1,"span",5),d(2,"app-json-tree",9),r()),n&2){let e=t.$implicit,i=u(3);s(),v(i.isArray(i.data)?-1:1),s(),y("data",e.value)("key",(i.isArray(i.data),""))}}function ve(n,t){if(n&1&&(o(0,"div",7),x(1,me,3,3,"div",8,Z().trackByItem,!0),r()),n&2){let e=u(2);s(),w(e.getEntries(e.data))}}function _e(n,t){if(n&1){let e=I();o(0,"div",2)(1,"div",3),_("click",function(){V(e);let a=u();return M(a.toggle())}),o(2,"span",4),l(3,"\u25B6"),r(),m(4,fe,2,1,"span",5),o(5,"span",6),l(6),r()(),m(7,ve,3,0,"div",7),r()}if(n&2){let e=u();s(2),z("expanded",e.expanded),s(2),v(e.key?4:-1),s(2),C(e.getPreview(e.data)),s(),v(e.expanded?7:-1)}}var A=class n{constructor(t){this.cd=t}data;key="";expanded=!1;toggle(){this.expanded=!this.expanded,this.cd.detectChanges()}trackByItem(t,e){return e.key}isPrimitive(t){return t===null||typeof t!="object"}isArray(t){return Array.isArray(t)}getType(t){return t===null?"null":typeof t}formatValue(t){return t===null?"null":typeof t=="string"?`"${t}"`:String(t)}getPreview(t){return Array.isArray(t)?`Array(${t.length})`:t&&typeof t=="object"?"{ ... }":String(t)}getEntries(t){return!t||typeof t!="object"?[]:Array.isArray(t)?t.map((e,i)=>({key:String(i),value:e})):Object.entries(t).map(([e,i])=>({key:e,value:i}))}static \u0275fac=function(e){return new(e||n)(L(q))};static \u0275cmp=c({type:n,selectors:[["app-json-tree"]],inputs:{data:"data",key:"key"},decls:3,vars:1,consts:[[1,"json-tree"],[3,"class"],[1,"complex-node"],[1,"toggle",3,"click"],[1,"arrow"],[1,"key"],[1,"preview"],[1,"children"],[1,"child-item"],[3,"data","key"]],template:function(e,i){e&1&&(o(0,"div",0),m(1,pe,2,3,"span",1)(2,_e,8,5,"div",2),r()),e&2&&(s(),v(i.isPrimitive(i.data)?1:2))},dependencies:()=>[n],styles:[".json-tree[_ngcontent-%COMP%]{font-family:Menlo,Monaco,Courier New,monospace;font-size:12px;line-height:1.6;color:var(--text-color)}.complex-node[_ngcontent-%COMP%]{margin-left:4px}.toggle[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;align-items:center;border-radius:2px}.toggle[_ngcontent-%COMP%]:hover{background-color:var(--code-bg)}.arrow[_ngcontent-%COMP%]{font-size:10px;margin-right:6px;color:var(--text-color);opacity:.5;display:inline-block;transition:transform .1s}.arrow.expanded[_ngcontent-%COMP%]{transform:rotate(90deg)}.children[_ngcontent-%COMP%]{margin-left:14px;border-left:1px solid var(--border-color);padding-left:6px}.string[_ngcontent-%COMP%]{color:var(--json-string)}.number[_ngcontent-%COMP%]{color:var(--json-number)}.boolean[_ngcontent-%COMP%]{color:var(--json-boolean)}.null[_ngcontent-%COMP%]{color:var(--json-null)}.key[_ngcontent-%COMP%]{color:var(--json-key);font-weight:500;margin-right:4px}.preview[_ngcontent-%COMP%]{color:var(--text-color);opacity:.5;font-style:italic}"]})};function ye(n,t){if(n&1&&(o(0,"div",13),d(1,"app-json-tree",14),r()),n&2){let e=u().$implicit;s(),y("data",e.message)}}function Ce(n,t){if(n&1){let e=I();o(0,"div",5)(1,"div",9),_("click",function(){let a=V(e).$implicit,p=u();return M(p.toggleEntry(a))}),o(2,"span",10),l(3),ee(4,"date"),r(),o(5,"span",11),l(6),r(),o(7,"span",12),l(8),r()(),m(9,ye,2,1,"div",13),r()}if(n&2){let e=t.$implicit,i=u();s(3),C(te(4,4,e.timestamp,"mediumTime")),s(3),C(i.getMessageType(e.message)),s(2),C(i.isExpanded(e)?"\u25BC":"\u25B6"),s(),v(i.isExpanded(e)?9:-1)}}var T=class n{debuggerService=g(f);messages=this.debuggerService.messages;expandedEntries=new Set;toggleEntry(t){this.expandedEntries.has(t)?this.expandedEntries.delete(t):this.expandedEntries.add(t)}isExpanded(t){return this.expandedEntries.has(t)}getMessageType(t){return t.surfaceUpdate?"Surface Update":t.dataModelUpdate?"Data Model Update":t.beginRendering?"Begin Rendering":t.deleteSurface?"Delete Surface":"Unknown"}processInput(t){if(t.trim())try{let e=t.trim().split(`
`);for(let i of e){if(!i.trim())continue;let a=JSON.parse(i);this.debuggerService.processMessage(a)}}catch(e){console.error("Failed to parse input",e),alert("Invalid JSON input")}}clear(){this.debuggerService.reset()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=c({type:n,selectors:[["app-log-viewer"]],decls:14,vars:0,consts:[["input",""],[1,"log-container"],[1,"header"],[1,"btn-clear",3,"click"],[1,"message-list"],[1,"message-item"],[1,"input-area"],["placeholder","Paste JSON/JSONL payload here..."],[1,"btn-send",3,"click"],[1,"message-summary",3,"click"],[1,"timestamp"],[1,"type"],[1,"arrow"],[1,"message-detail"],[3,"data"]],template:function(e,i){if(e&1){let a=I();o(0,"div",1)(1,"div",2)(2,"h3"),l(3,"Message Log"),r(),o(4,"button",3),_("click",function(){return V(a),M(i.clear())}),l(5,"Clear"),r()(),o(6,"div",4),x(7,Ce,10,7,"div",5,X),r(),o(9,"div",6),d(10,"textarea",7,0),o(12,"button",8),_("click",function(){V(a);let P=Y(11);return i.processInput(P.value),M(P.value="")}),l(13,"Send"),r()()()}e&2&&(s(7),w(i.messages()))},dependencies:[ie,A,ne],styles:[".log-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:var(--panel-bg);color:var(--text-color)}.header[_ngcontent-%COMP%]{padding:0 16px;height:40px;display:flex;justify-content:space-between;align-items:center;background:var(--header-bg);border-bottom:1px solid var(--border-color);font-size:.9rem;font-weight:500}.message-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:0}.message-item[_ngcontent-%COMP%]{border-bottom:1px solid var(--border-color);font-family:Menlo,Monaco,Courier New,monospace;font-size:12px}.message-summary[_ngcontent-%COMP%]{padding:8px 12px;cursor:pointer;display:flex;align-items:center;transition:background-color .2s}.message-summary[_ngcontent-%COMP%]:hover{background-color:var(--code-bg)}.message-detail[_ngcontent-%COMP%]{padding:8px 16px;background-color:var(--code-bg);border-top:1px solid var(--border-color)}.arrow[_ngcontent-%COMP%]{margin-left:auto;font-size:10px;color:var(--text-color);opacity:.6;padding-right:4px}.timestamp[_ngcontent-%COMP%]{color:var(--text-color);opacity:.6;margin-right:12px;font-size:11px}.type[_ngcontent-%COMP%]{font-weight:600;color:var(--accent-color)}.input-area[_ngcontent-%COMP%]{padding:12px;border-top:1px solid var(--border-color);display:flex;flex-direction:column;gap:12px;background:var(--panel-bg)}textarea[_ngcontent-%COMP%]{height:80px;padding:12px;font-family:Menlo,Monaco,Courier New,monospace;resize:none;background-color:var(--bg-color);color:var(--text-color);border:1px solid var(--border-color);border-radius:6px;font-size:12px;transition:border-color .2s}textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-color)}.btn-send[_ngcontent-%COMP%]{align-self:flex-end;padding:6px 16px;cursor:pointer;background-color:var(--accent-color);color:#fff;border:none;border-radius:4px;font-weight:500;font-size:12px;transition:opacity .2s}.btn-send[_ngcontent-%COMP%]:hover{opacity:.9}.btn-clear[_ngcontent-%COMP%]{background:none;border:1px solid var(--border-color);color:var(--text-color);padding:4px 10px;border-radius:4px;cursor:pointer;font-size:11px;transition:background-color .2s}.btn-clear[_ngcontent-%COMP%]:hover{background-color:var(--bg-color)}"]})};var be=(n,t)=>t.id;function De(n,t){n&1&&(o(0,"div",3),l(1," No surfaces to render. Send a payload to start. "),r())}function Ve(n,t){if(n&1&&(o(0,"div",4)(1,"div",5),l(2),r(),d(3,"a2ui-surface",6),r()),n&2){let e=t.$implicit;s(2),b("Surface: ",e.id),s(),y("surfaceId",e.id)("surface",e.data)}}var j=class n{debuggerService=g(f);surfaces=h(()=>{let t=this.debuggerService.surfacesMap(),e=[];for(let[i,a]of t.entries())e.push({id:i,data:a});return e});static \u0275fac=function(e){return new(e||n)};static \u0275cmp=c({type:n,selectors:[["app-preview"]],decls:8,vars:1,consts:[[1,"preview-container"],[1,"header"],[1,"canvas"],[1,"empty-state"],[1,"surface-wrapper"],[1,"surface-label"],[3,"surfaceId","surface"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h3"),l(3,"UI Preview"),r()(),o(4,"div",2),m(5,De,2,0,"div",3),x(6,Ve,4,3,"div",4,be),r()()),e&2&&(s(5),v(i.surfaces().length===0?5:-1),s(),w(i.surfaces()))},dependencies:[de],styles:[".preview-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:var(--surface-bg)}.header[_ngcontent-%COMP%]{padding:0 16px;height:40px;display:flex;align-items:center;background:var(--header-bg);border-bottom:1px solid var(--border-color)}h3[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;margin:0;color:var(--text-color)}.canvas[_ngcontent-%COMP%]{flex:1;overflow:auto;padding:24px;display:flex;flex-direction:column;gap:24px}.empty-state[_ngcontent-%COMP%]{color:var(--text-color);opacity:.5;text-align:center;margin-top:60px;font-weight:500}.surface-wrapper[_ngcontent-%COMP%]{border:1px solid var(--border-color);border-radius:8px;padding:24px;background:var(--bg-color);box-shadow:0 1px 3px #0000000d;transition:box-shadow .2s,border-color .2s}.surface-wrapper[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px #0000000d;border-color:var(--accent-color)}.surface-label[_ngcontent-%COMP%]{font-size:11px;text-transform:uppercase;letter-spacing:.5px;color:var(--text-color);opacity:.5;margin-bottom:12px;font-weight:600}"]})};var R=class n{debuggerService=g(f);surfaces=this.debuggerService.surfacesMap;stateObject=h(()=>{let t=this.surfaces(),e={};for(let[i,a]of t.entries())e[i]={rootComponentId:a.rootComponentId,dataModel:this.mapToObject(a.dataModel),componentsCount:a.components.size,componentIds:Array.from(a.components.keys())};return e});mapToObject(t){let e={};for(let[i,a]of t.entries())a instanceof Map?e[i]=this.mapToObject(a):e[i]=a;return e}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=c({type:n,selectors:[["app-state-viewer"]],decls:6,vars:1,consts:[[1,"state-container"],[1,"header"],[1,"content"],[3,"data"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h3"),l(3,"Internal State"),r()(),o(4,"div",2),d(5,"app-json-tree",3),r()()),e&2&&(s(5),y("data",i.stateObject()))},dependencies:[A],styles:[".state-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:var(--panel-bg);color:var(--text-color);border-top:1px solid var(--border-color)}.header[_ngcontent-%COMP%]{padding:0 16px;height:40px;display:flex;align-items:center;background:var(--header-bg);border-bottom:1px solid var(--border-color)}h3[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;margin:0}.content[_ngcontent-%COMP%]{flex:1;overflow:auto;padding:16px;background-color:var(--panel-bg)}"]})};var Me=new J("",{factory:()=>ce}),ce="always";var xe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$({type:n});static \u0275inj=H({})}return n})();var ue=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Me,useValue:e.callSetDisabledState??ce}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=$({type:n});static \u0275inj=H({imports:[xe]})}return n})();var B=class n{debuggerService=g(f);currentIndex=this.debuggerService.currentIndex;history=this.debuggerService.history;maxIndex=h(()=>this.history().length-1);totalMessages=h(()=>this.history().length);onSliderChange(t){let e=parseInt(t.target.value,10);this.debuggerService.jumpTo(e)}stepBack(){this.debuggerService.jumpTo(this.currentIndex()-1)}stepForward(){this.debuggerService.jumpTo(this.currentIndex()+1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=c({type:n,selectors:[["app-timeline"]],decls:10,vars:7,consts:[[1,"timeline-container"],[1,"controls"],["title","Step Back",3,"click","disabled"],[1,"slider-wrapper"],["type","range",1,"timeline-slider",3,"input","min","max","value"],[1,"label"],["title","Step Forward",3,"click","disabled"]],template:function(e,i){e&1&&(F(0,"div",0)(1,"div",1)(2,"button",2),N("click",function(){return i.stepBack()}),l(3,"\u25C0"),S(),F(4,"div",3)(5,"input",4),N("input",function(p){return i.onSliderChange(p)}),S(),F(6,"div",5),l(7),S()(),F(8,"button",6),N("click",function(){return i.stepForward()}),l(9,"\u25B6"),S()()()),e&2&&(s(2),k("disabled",i.currentIndex()<=0),s(3),k("min",-1)("max",i.maxIndex())("value",i.currentIndex()),s(2),Q("",i.currentIndex()+1," / ",i.totalMessages()),s(),k("disabled",i.currentIndex()>=i.maxIndex()))},dependencies:[ue],styles:[".timeline-container[_ngcontent-%COMP%]{height:40px;display:flex;align-items:center;padding:0 16px;background:var(--panel-bg);border-top:1px solid var(--border-color);color:var(--text-color)}.controls[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;gap:12px}.slider-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:12px}.timeline-slider[_ngcontent-%COMP%]{flex:1;cursor:pointer;width:100%}.label[_ngcontent-%COMP%]{font-size:11px;font-family:monospace;min-width:60px;text-align:right;color:var(--text-color);opacity:.7}button[_ngcontent-%COMP%]{background:none;border:1px solid var(--border-color);border-radius:4px;color:var(--text-color);width:28px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:10px}button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--header-bg)}button[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:default}"]})};var G=class n{title="debugger";isDarkMode=!1;constructor(){this.initializeTheme()}toggleTheme(){this.isDarkMode=!this.isDarkMode,this.updateTheme()}initializeTheme(){let t=localStorage.getItem("theme");t?this.isDarkMode=t==="dark":this.isDarkMode=window.matchMedia("(prefers-color-scheme: dark)").matches,this.updateTheme()}updateTheme(){document.documentElement.setAttribute("data-theme",this.isDarkMode?"dark":"light"),localStorage.setItem("theme",this.isDarkMode?"dark":"light")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=c({type:n,selectors:[["app-root"]],decls:15,vars:2,consts:[[1,"app-container"],[1,"app-header"],[1,"logo"],[1,"theme-toggle",3,"click"],[1,"content-wrapper"],[1,"sidebar"],[1,"main-content"],[1,"preview-pane"],[1,"state-pane"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"header",1)(2,"div",2),l(3,"A2UI Debugger"),r(),o(4,"button",3),_("click",function(){return i.toggleTheme()}),l(5),r()(),o(6,"div",4)(7,"div",5),d(8,"app-log-viewer"),r(),o(9,"div",6)(10,"div",7),d(11,"app-preview"),r(),o(12,"div",8),d(13,"app-state-viewer"),r(),d(14,"app-timeline"),r()()()),e&2&&(s(4),W("aria-label",i.isDarkMode?"Switch to light mode":"Switch to dark mode"),s(),b(" ",i.isDarkMode?"\u2600\uFE0F":"\u{1F319}"," "))},dependencies:[T,j,R,B],styles:["[_nghost-%COMP%]{display:block;height:100vh;overflow:hidden;background-color:var(--bg-color);color:var(--text-color)}.app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.app-header[_ngcontent-%COMP%]{height:50px;padding:0 16px;display:flex;align-items:center;justify-content:space-between;background-color:var(--header-bg);border-bottom:1px solid var(--border-color)}.logo[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem}.theme-toggle[_ngcontent-%COMP%]{background:none;border:1px solid var(--border-color);border-radius:4px;cursor:pointer;font-size:1.2rem;padding:4px 8px}.theme-toggle[_ngcontent-%COMP%]:hover{background-color:var(--bg-color)}.content-wrapper[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.sidebar[_ngcontent-%COMP%]{width:400px;height:100%;overflow:hidden;border-right:1px solid var(--border-color);background-color:var(--panel-bg)}.main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;overflow:hidden}.preview-pane[_ngcontent-%COMP%]{flex:2;overflow:hidden;border-bottom:1px solid var(--border-color);background-color:var(--surface-bg)}.state-pane[_ngcontent-%COMP%]{flex:1;overflow:hidden;background-color:var(--panel-bg);display:flex;flex-direction:column}app-timeline[_ngcontent-%COMP%]{display:block;width:100%}"]})};var he={components:{AudioPlayer:{},Button:{},Card:{},Column:{},CheckBox:{container:{},element:{},label:{}},DateTimeInput:{container:{},element:{},label:{}},Divider:{},Image:{all:{},icon:{},avatar:{},smallFeature:{},mediumFeature:{},largeFeature:{},header:{}},Icon:{},List:{},Modal:{backdrop:{},element:{}},MultipleChoice:{container:{},element:{},label:{}},Row:{},Slider:{container:{},element:{},label:{}},Tabs:{container:{},element:{},controls:{all:{},selected:{}}},Text:{all:{},h1:{},h2:{},h3:{},h4:{},h5:{},caption:{},body:{}},TextField:{container:{},element:{},label:{}},Video:{}},elements:{a:{},audio:{},body:{},button:{},h1:{},h2:{},h3:{},h4:{},h5:{},iframe:{},input:{},p:{},pre:{},textarea:{},video:{}},markdown:{p:[],h1:[],h2:[],h3:[],h4:[],h5:[],ul:[],ol:[],li:[],a:[],strong:[],em:[]},additionalStyles:{}};re(G,{providers:[{provide:se,useValue:le},{provide:ae,useValue:he}]}).catch(n=>console.error(n));
